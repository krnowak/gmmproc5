include $(top_srcdir)/gmmproc/xml/structured/structured.am

gmmproc_xml_tests_node_sources = gmmproc/xml/tests/node.cc
gmmproc_xml_tests_walker_sources = gmmproc/xml/tests/walker.cc

if GMMPROC_XML_PUGI

gmmproc_xml_pugi_cppflags = -DGMMPROC_XML_USE_PUGI
gmmproc_xml_pugi_ldadd = -lpugixml

gmmproc_xml_pugi_tests = \
  gmmproc/xml/tests/pugi-node \
  gmmproc/xml/tests/pugi-walker

check_PROGRAMS += $(gmmproc_xml_pugi_tests)
TESTS += $(gmmproc_xml_pugi_tests)

gmmproc_xml_tests_pugi_node_SOURCES = $(gmmproc_xml_tests_node_sources)
gmmproc_xml_tests_pugi_node_CPPFLAGS = $(gmmproc_xml_pugi_cppflags)
gmmproc_xml_tests_pugi_node_LDADD = $(gmmproc_xml_pugi_ldadd)
gmmproc_xml_tests_pugi_node_CXXFLAGS = $(common_cxxflags)

gmmproc_xml_tests_pugi_walker_SOURCES = $(gmmproc_xml_tests_walker_sources)
gmmproc_xml_tests_pugi_walker_CPPFLAGS = $(gmmproc_xml_pugi_cppflags)
gmmproc_xml_tests_pugi_walker_LDADD = $(gmmproc_xml_pugi_ldadd)
gmmproc_xml_tests_pugi_walker_CXXFLAGS = $(common_cxxflags)

endif

if GMMPROC_XML_LIBXML

gmmproc_xml_libxml_cppflags = $(LIBXML_CFLAGS) -DGMMPROC_XML_USE_LIBXML
gmmproc_xml_libxml_ldadd = $(LIBXML_LIBS)

gmmproc_xml_libxml_tests = \
  gmmproc/xml/tests/libxml-node \
  gmmproc/xml/tests/libxml-walker

#check_PROGRAMS += $(gmmproc_xml_libxml_tests)
#TESTS += $(gmmproc_xml_libxml_tests)

#gmmproc_xml_tests_libxml_node_SOURCES = $(gmmproc_xml_tests_node_sources)
#gmmproc_xml_tests_libxml_node_CPPFLAGS = $(gmmproc_xml_libxml_cppflags)
#gmmproc_xml_tests_libxml_node_LDADD = $(gmmproc_xml_libxml_ldadd)
#gmmproc_xml_tests_libxml_node_CXXFLAGS = $(common_cxxflags)

#gmmproc_xml_tests_libxml_walker_SOURCES = $(gmmproc_xml_tests_walker_sources)
#gmmproc_xml_tests_libxml_walker_CPPFLAGS = $(gmmproc_xml_libxml_cppflags)
#gmmproc_xml_tests_libxml_walker_LDADD = $(gmmproc_xml_libxml_ldadd)
#gmmproc_xml_tests_libxml_walker_CXXFLAGS = $(common_cxxflags)

endif

if GMMPROC_XML_USE_PUGI

# for other subprojects using the xml.hh header
gmmproc_xml_cppflags = $(gmmproc_xml_pugi_cppflags)
gmmproc_xml_ldadd = $(gmmproc_xml_pugi_ldadd)

endif

if GMMPROC_XML_USE_LIBXML

# for other subprojects using the xml.hh header
gmmproc_xml_cppflags = $(gmmproc_xml_libxml_cppflags)
gmmproc_xml_ldadd = $(gmmproc_xml_libxml_ldadd)

endif
