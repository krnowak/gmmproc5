xml_base_tests_node_sources = src/mm/xml/base/tests/node.cc
xml_base_tests_walker_sources = src/mm/xml/base/tests/walker.cc

if XML_PUGI

xml_base_pugi_cppflags = -DMM_XML_BASE_USE_PUGI
xml_base_pugi_ldadd = -lpugixml

xml_base_pugi_tests = \
  src/mm/xml/base/tests/pugi-node \
  src/mm/xml/base/tests/pugi-walker

check_PROGRAMS += $(xml_base_pugi_tests)
TESTS += $(xml_base_pugi_tests)

src_mm_xml_base_tests_pugi_node_SOURCES = $(xml_base_tests_node_sources)
src_mm_xml_base_tests_pugi_node_CPPFLAGS = $(xml_base_pugi_cppflags) -I$(top_srcdir)/src
src_mm_xml_base_tests_pugi_node_LDADD = $(xml_base_pugi_ldadd)
src_mm_xml_base_tests_pugi_node_CXXFLAGS = $(common_cxxflags)

src_mm_xml_base_tests_pugi_walker_SOURCES = $(xml_base_tests_walker_sources)
src_mm_xml_base_tests_pugi_walker_CPPFLAGS = $(xml_base_pugi_cppflags) -I$(top_srcdir)/src
src_mm_xml_base_tests_pugi_walker_LDADD = $(xml_base_pugi_ldadd)
src_mm_xml_base_tests_pugi_walker_CXXFLAGS = $(common_cxxflags)

endif

if XML_LIBXML

xml_base_libxml_cppflags = $(LIBXML_CFLAGS) -DMM_XML_BASE_USE_LIBXML
xml_base_libxml_ldadd = $(LIBXML_LIBS)

xml_base_libxml_tests = \
  src/mm/xml/base/tests/libxml-node \
  src/mm/xml/base/tests/libxml-walker

#check_PROGRAMS += $(xml_base_libxml_tests)
#TESTS += $(xml_base_libxml_tests)

src_mm_xml_base_tests_libxml_node_SOURCES = $(xml_base_tests_node_sources)
src_mm_xml_base_tests_libxml_node_CPPFLAGS = $(xml_base_libxml_cppflags) -I$(top_srcdir)/src
src_mm_xml_base_tests_libxml_node_LDADD = $(xml_base_libxml_ldadd)
src_mm_xml_base_tests_libxml_node_CXXFLAGS = $(common_cxxflags)

src_mm_xml_base_tests_libxml_walker_SOURCES = $(xml_base_tests_walker_sources)
src_mm_xml_base_tests_libxml_walker_CPPFLAGS = $(xml_base_libxml_cppflags) -I$(top_srcdir)/src
src_mm_xml_base_tests_libxml_walker_LDADD = $(xml_base_libxml_ldadd)
src_mm_xml_base_tests_libxml_walker_CXXFLAGS = $(common_cxxflags)

endif

if XML_USE_PUGI

xml_base_impl_cppflags = $(xml_base_pugi_cppflags)
xml_base_impl_ldadd = $(xml_base_pugi_ldadd)

endif

if XML_USE_LIBXML

xml_base_impl_cppflags = $(xml_base_libxml_cppflags)
xml_base_impl_ldadd = $(xml_base_libxml_ldadd)

endif
